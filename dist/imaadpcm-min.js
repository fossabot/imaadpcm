/*
 imaadpcm
 JavaScript IMA ADPCM codec.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/imaadpcm

 References:
 http://www.cs.columbia.edu/~hgs/audio/dvi/
 https://github.com/acida/pyima
 https://wiki.multimedia.cx/index.php/IMA_ADPCM

 byte-data
 Readable data to and from byte buffers.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var a=function(){};a.prototype=e;return new a};$jscomp.underscoreProtoCanBeSet=function(){var e={a:!0},a={};try{return a.__proto__=e,a.a}catch(b){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(e,a){e.__proto__=a;if(e.__proto__!==a)throw new TypeError(e+" is not extensible");return e}:null;
$jscomp.inherits=function(e,a){e.prototype=$jscomp.objectCreate(a.prototype);e.prototype.constructor=e;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(e,a)}else for(b in a)if("prototype"!=b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(a,b);f&&Object.defineProperty(e,b,f)}else e[b]=a[b];e.superClass_=a.prototype};$jscomp.owns=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,a,b){e!=Array.prototype&&e!=Object.prototype&&(e[a]=b.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(e,a,b,f){if(a){b=$jscomp.global;e=e.split(".");for(f=0;f<e.length-1;f++){var h=e[f];h in b||(b[h]={});b=b[h]}e=e[e.length-1];f=b[e];a=a(f);a!=f&&null!=a&&$jscomp.defineProperty(b,e,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Object.assign",function(e){return e?e:function(a,b){for(var f=1;f<arguments.length;f++){var h=arguments[f];if(h)for(var d in h)$jscomp.owns(h,d)&&(a[d]=h[d])}return a}},"es6","es3");
(function(e){function a(f){if(b[f])return b[f].exports;var h=b[f]={i:f,l:!1,exports:{}};e[f].call(h.exports,h,h.exports,a);h.l=!0;return h.exports}var b={};a.m=e;a.c=b;a.d=function(b,h,d){a.o(b,h)||Object.defineProperty(b,h,{configurable:!1,enumerable:!0,get:d})};a.n=function(b){var h=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(h,"a",h);return h};a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};a.p="";return a(a.s=1)})([function(e,a,b){var f=new Float32Array(1),
h=new Int32Array(f.buffer),d=new Float64Array(1),c=new Uint32Array(d.buffer),k=b(4);a=function(a){var g=k.call(this,a)||this;g.char=a["char"];g.float=a["float"];g.buildType_();return g};$jscomp.inherits(a,k);a.prototype.read16F_=function(a,b){a=this.read_(a,b,{bits:16,offset:2});b=(a&31744)>>10;var g=a&1023;return(b?Math.pow(2,b-15)*(1+g/1024):g/1024*.00006103515625)*(a>>15?-1:1)};a.prototype.read32F_=function(a,b){h[0]=this.read_(a,b,{bits:32,offset:4});return f[0]};a.prototype.read64F_=function(a,
b){c[0]=this.read_(a,b,{bits:32,offset:4});c[1]=this.read_(a,b+4,{bits:32,offset:4});return d[0]};a.prototype.readChar_=function(a,b){for(var c="",g=0;g<this.offset;)c+=String.fromCharCode(a[b+g]),g++;return c};a.prototype.write64F_=function(a,b,k){d[0]=b;b={bits:32,offset:4,lastByteMask:255};k=this.write_(a,c[0],k,b);return this.write_(a,c[1],k,b)};a.prototype.write32F_=function(a,b,c,d){f[0]=b;return c=this.write_(a,h[0],c,d)};a.prototype.write16F_=function(a,b,c){f[0]=b;var d=h[0];b=d>>16&32768;
var g=d>>12&2047;d=d>>23&255;103<=d&&(b=(b|d-112<<10|g>>1)+(g&1));a[c++]=b&255;a[c++]=b>>>8&255;return c};a.prototype.writeChar_=function(a,b,c){a[c++]=b.charCodeAt(0);return c};a.prototype.buildType_=function(){this.setReader_();this.setWriter_();this.float&&(this.min=-Infinity,this.max=Infinity)};a.prototype.setReader_=function(){this.float?16==this.bits?this.reader=this.read16F_:32==this.bits?this.reader=this.read32F_:64==this.bits&&(this.reader=this.read64F_):this.char?this.reader=this.readChar_:
32<this.bits&&(this.reader=this.readBits_)};a.prototype.setWriter_=function(){this.float?16==this.bits?this.writer=this.write16F_:32==this.bits?this.writer=this.write32F_:64==this.bits&&(this.writer=this.write64F_):this.char&&(this.writer=this.writeChar_)};e.exports=a},function(e,a,b){function f(a){a-=l;if(0<=a)var b=0;else b=8,a=-a;var c=t[p],d=c>>3;a>c&&(b|=4,a-=c,d+=c);c>>=1;a>c&&(b|=2,a-=c,d+=c);c>>=1;a>c&&(b|=1,d+=c);l=b&8?l-d:l+d;-32768>l?l=-32768:32767<l&&(l=32767);p+=q[b&7];0>p?p=0:88<p&&
(p=88);return b}function h(a){var b=0;a&4&&(b+=r);a&2&&(b+=r>>1);a&1&&(b+=r>>2);b+=r>>3;a&8&&(b=-b);m+=b;32767<m?m=32767:-32767>m&&(m=-32767);n+=q[a];0>n?n=0:88<n&&(n=88);r=t[n];return m}function d(a){var b=a[0];f(b);var c=[];c.push(k.pack(b,g)[0]);c.push(k.pack(b,g)[1]);c.push(p);c.push(0);for(b=3;b<a.length;b+=2){var d=f(a[b]),h=f(a[b+1]);c.push(h<<4|d)}for(;256>c.length;)c.push(0);return c}function c(a){m=k.unpack([a[0],a[1]],g);n=a[2];r=t[n];for(var b=[m,k.unpack([a[2],a[3]],g)],c=4;c<a.length;c++){var d=
a[c],f=d>>4;b.push(h(f<<4^d));b.push(h(f))}return b}var k=b(2),g=k.int16,q=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],t=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],l=0,p=
0,m=0,n=0,r=7;window.imaadpcm=window.imaadpcm?window.imaadpcm:{};window.imaadpcm.encode=function(a){for(var b=[],c=[],g=0;g<a.length;g++)if(c.push(a[g]),0==g%505&&0!=g||g==a.length-1)b=b.concat(d(c)),c=[];return b};window.imaadpcm.decode=function(a,b){b=void 0===b?256:b;for(var d=[],g=[],k=0;k<a.length;k++)0==k%b&&0!=k&&(d=d.concat(c(g)),g=[]),g.push(a[k]);return d};window.imaadpcm.encodeBlock=d;window.imaadpcm.decodeBlock=c},function(e,a,b){function f(a,b,c){c=void 0===c?10:c;var g=[];b.char?g=b.char?
a.slice(0,b.realBits/8):a:Array.isArray(a)||(g=[a]);return d.toBytes(g,d.getType(b,c))}function h(a,b,c){c=void 0===c?10:c;a=d.fromBytes(a.slice(0,8>b.bits?b.bits:b.realBits/8),d.getType(b,c));return a=b.char?a.slice(0,b.bits/8):a[0]}var d=b(3),c=b(0);a.pack=f;a.unpack=h;a.packArray=function(a,b,c){return d.toBytes(a,d.getType(b,void 0===c?10:c))};a.unpackArray=function(a,b,c){return d.fromBytes(a,d.getType(b,void 0===c?10:c))};a.unpackStruct=function(a,b,c){c=void 0===c?10:c;for(var d=a.length,g=
0,f=0;f<b.length;f++)g+=b[f].realBits/8;if(d<g)return[];d=[];for(f=g=0;g<b.length;){var k=8>b[g].bits?1:b[g].realBits/8;d=d.concat(h(a.slice(f,f+k),b[g],c));f+=k;g++}return d};a.packStruct=function(a,b,c){c=void 0===c?10:c;if(a.length<b.length)return[];for(var d=[],g=0;g<b.length;g++)d=d.concat(f(a[g],b[g],c));return d};a.findString=function(a,b){for(var d,g=0;g<a.length;g++)if(d=h(a.slice(g,g+b.length+1),new c({bits:8*b.length,"char":!0})),d==b)return g;return-1};a.Type=c;a.chr=new c({bits:8,"char":!0});
a.fourCC=new c({bits:32,"char":!0});a.bool=new c({bits:1});a.int2=new c({bits:2,signed:!0});a.uInt2=new c({bits:2});a.int4=new c({bits:4,signed:!0});a.uInt4=new c({bits:4});a.int8=new c({bits:8,signed:!0});a.uInt8=new c({bits:8});a.int16=new c({bits:16,signed:!0});a.uInt16=new c({bits:16});a.float16=new c({bits:16,"float":!0});a.int24=new c({bits:24,signed:!0});a.uInt24=new c({bits:24});a.int32=new c({bits:32,signed:!0});a.uInt32=new c({bits:32});a.float32=new c({bits:32,"float":!0});a.int40=new c({bits:40,
signed:!0});a.uInt40=new c({bits:40});a.int48=new c({bits:48,signed:!0});a.uInt48=new c({bits:48});a.float64=new c({bits:64,"float":!0});a.int16BE=new c({bits:16,signed:!0,be:!0});a.uInt16BE=new c({bits:16,be:!0});a.float16BE=new c({bits:16,"float":!0,be:!0});a.int24BE=new c({bits:24,signed:!0,be:!0});a.uInt24BE=new c({bits:24,be:!0});a.int32BE=new c({bits:32,signed:!0,be:!0});a.uInt32BE=new c({bits:32,be:!0});a.float32BE=new c({bits:32,"float":!0,be:!0});a.int40BE=new c({bits:40,signed:!0,be:!0});
a.uInt40BE=new c({bits:40,be:!0});a.int48BE=new c({bits:48,signed:!0,be:!0});a.uInt48BE=new c({bits:48,be:!0});a.float64BE=new c({bits:64,"float":!0,be:!0})},function(e,a,b){var f=b(0),h=b(5);a.getType=function(a,b){a=Object.assign(new f({}),a);a.base=b;return a};a.toBytes=function(a,b){for(var c=0,d=0,f=a.length,e=[];c<f;)d=b.writer(e,a[c++],d);b.be&&h(e,b.offset);if(10!=b.base){a=b.base;c=0;for(d=e.length;c<d;)e[c]=e[c].toString(a),c++;a=0;c=e.length;for(b=(2==b.base?8:2)+1;a<c;)e[a]=Array(b-e[a].length).join("0")+
e[a],a++}return e};a.fromBytes=function(a,b){b.be&&h(a,b.offset);if(10!=b.base)for(var c=b.base,d=0,f=a.length;d<f;)a[d]=parseInt(a[d],c),d++;c=[];d=0;for(f=a.length-(b.offset-1);d<f;)c.push(b.reader(a,d)),d+=b.offset;b.char&&(c=c.join(""));return c}},function(e,a){a=function(a){this.bits=a.bits;this.be=a.be;this.signed=a.signed;this.base=a.base?a.base:10;this.reader=this.read_;this.writer=this.write_;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits=this.bits;this.lastByteMask=255;
this.build_()};a.prototype.sign=function(a){a>this.max&&(a-=2*this.max+2);return a};a.prototype.overflow=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};a.prototype.read_=function(a,f,e){var b=0;for(e=(void 0===e?this:e).offset-1;0<e;)b|=a[e+f]<<8*e,e--;b=(a[f]|b)>>>0;return this.overflow(this.sign(b))};a.prototype.readBits_=function(a,e,h){h=void 0===h?this:h;for(var b="",c=0;c<h.offset;){var f=a[e+c].toString(2);b=Array(9-f.length).join("0")+f+b;c++}return this.overflow(this.sign(parseInt(b,
2)))};a.prototype.write_=function(a,e,h,d){d=void 0===d?this:d;e=this.overflow(e);var b=255,f=d.offset;h=this.writeFirstByte_(a,e,h,d);for(var g=2;g<=f;g++)g==f&&(b=d.lastByteMask),a[h++]=Math.floor(e/Math.pow(2,8*(g-1)))&b;return h};a.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits/8)};a.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=
-a/2):(this.max=a-1,this.min=0)};a.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};a.prototype.setRealBits_=function(){this.realBits=8<this.bits?16>=this.bits?16:24>=this.bits?24:32>=this.bits?32:40>=this.bits?40:48>=this.bits?48:56>=this.bits?56:64:this.bits};a.prototype.setLastByteMask_=function(){var a=8-(this.realBits-this.bits);this.lastByteMask=Math.pow(2,0<a?a:8)-1};a.prototype.writeFirstByte_=function(a,e,h,d){d=void 0===d?this:d;
8>d.bits?a[h++]=0>e?e+Math.pow(2,d.bits):e:a[h++]=e&255;return h};e.exports=a},function(e,a){e.exports=function(a,e){for(var b=a.length,d=0;d<b;){for(var c=a,f=d,g=0,q=e-1,t=parseInt(e/2,10);g<t;){var l=c[f+g];c[f+g]=c[f+q];c[f+q]=l;g++;q--}d+=e}}}]);
