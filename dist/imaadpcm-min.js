/*
 imaadpcm
 JavaScript IMA ADPCM codec.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/imaadpcm

 References:
 http://www.cs.columbia.edu/~hgs/audio/dvi/
 https://github.com/acida/pyima
 https://wiki.multimedia.cx/index.php/IMA_ADPCM

 byte-data
 Readable data to and from byte buffers.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(d){var a=function(){};a.prototype=d;return new a};$jscomp.underscoreProtoCanBeSet=function(){var d={a:!0},a={};try{return a.__proto__=d,a.a}catch(b){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(d,a){d.__proto__=a;if(d.__proto__!==a)throw new TypeError(d+" is not extensible");return d}:null;
$jscomp.inherits=function(d,a){d.prototype=$jscomp.objectCreate(a.prototype);d.prototype.constructor=d;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(d,a)}else for(b in a)if("prototype"!=b)if(Object.defineProperties){var g=Object.getOwnPropertyDescriptor(a,b);g&&Object.defineProperty(d,b,g)}else d[b]=a[b];d.superClass_=a.prototype};$jscomp.owns=function(d,a){return Object.prototype.hasOwnProperty.call(d,a)};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,b){d!=Array.prototype&&d!=Object.prototype&&(d[a]=b.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,a,b,g){if(a){b=$jscomp.global;d=d.split(".");for(g=0;g<d.length-1;g++){var h=d[g];h in b||(b[h]={});b=b[h]}d=d[d.length-1];g=b[d];a=a(g);a!=g&&null!=a&&$jscomp.defineProperty(b,d,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Object.assign",function(d){return d?d:function(a,b){for(var g=1;g<arguments.length;g++){var h=arguments[g];if(h)for(var e in h)$jscomp.owns(h,e)&&(a[e]=h[e])}return a}},"es6","es3");
(function(d){function a(g){if(b[g])return b[g].exports;var h=b[g]={i:g,l:!1,exports:{}};d[g].call(h.exports,h,h.exports,a);h.l=!0;return h.exports}var b={};a.m=d;a.c=b;a.d=function(b,h,e){a.o(b,h)||Object.defineProperty(b,h,{configurable:!1,enumerable:!0,get:e})};a.n=function(b){var h=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(h,"a",h);return h};a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};a.p="";return a(a.s=1)})([function(d,a,b){var g=new Float32Array(1),
h=new Int32Array(g.buffer),e=new Float64Array(1),c=new Uint32Array(e.buffer),k=b(4);a=function(a){var f=k.call(this,a)||this;f.char=a["char"];f.float=a["float"];f.buildType_();return f};$jscomp.inherits(a,k);a.prototype.read16F_=function(a,b){a=this.read_(a,b,{bits:16,offset:2});b=(a&31744)>>10;var f=a&1023;return(b?Math.pow(2,b-15)*(1+f/1024):f/1024*.00006103515625)*(a>>15?-1:1)};a.prototype.read32F_=function(a,b){h[0]=this.read_(a,b,{bits:32,offset:4});return g[0]};a.prototype.read64F_=function(a,
b){c[0]=this.read_(a,b,{bits:32,offset:4});c[1]=this.read_(a,b+4,{bits:32,offset:4});return e[0]};a.prototype.readChar_=function(a,b){for(var c="",f=0;f<this.offset;)c+=String.fromCharCode(a[b+f]),f++;return c};a.prototype.write64F_=function(a,b,k){e[0]=b;b={bits:32,offset:4,lastByteMask:255};k=this.write_(a,c[0],k,b);return this.write_(a,c[1],k,b)};a.prototype.write32F_=function(a,b,c,e){g[0]=b;return c=this.write_(a,h[0],c,e)};a.prototype.write16F_=function(a,b,c){g[0]=b;var e=h[0];b=e>>16&32768;
var f=e>>12&2047;e=e>>23&255;103<=e&&(b=(b|e-112<<10|f>>1)+(f&1));a[c++]=b&255;a[c++]=b>>>8&255;return c};a.prototype.writeChar_=function(a,b,c){a[c++]=b.charCodeAt(0);return c};a.prototype.buildType_=function(){this.setReader_();this.setWriter_();this.float&&(this.min=-Infinity,this.max=Infinity)};a.prototype.setReader_=function(){this.float?16==this.bits?this.reader=this.read16F_:32==this.bits?this.reader=this.read32F_:64==this.bits&&(this.reader=this.read64F_):this.char?this.reader=this.readChar_:
32<this.bits&&(this.reader=this.readBits_)};a.prototype.setWriter_=function(){this.float?16==this.bits?this.writer=this.write16F_:32==this.bits?this.writer=this.write32F_:64==this.bits&&(this.writer=this.write64F_):this.char&&(this.writer=this.writeChar_)};d.exports=a},function(d,a,b){function g(a){a-=l;if(0<=a)var b=0;else b=8,a=-a;var c=t[p],e=c>>3;a>c&&(b|=4,a-=c,e+=c);c>>=1;a>c&&(b|=2,a-=c,e+=c);c>>=1;a>c&&(b|=1,e+=c);l=b&8?l-e:l+e;-32768>l?l=-32768:32767<l&&(l=32767);p+=q[b&7];0>p?p=0:88<p&&
(p=88);return b}function h(a){var b=0;a&4&&(b+=r);a&2&&(b+=r>>1);a&1&&(b+=r>>2);b+=r>>3;a&8&&(b=-b);m+=b;32767<m?m=32767:-32767>m&&(m=-32767);n+=q[a];0>n?n=0:88<n&&(n=88);r=t[n];return m}function e(a){var b=a[0];g(b);var c=[];c.push(k.pack(b,f)[0]);c.push(k.pack(b,f)[1]);c.push(p);c.push(0);for(b=3;b<a.length;b+=2){var e=g(a[b]),h=g(a[b+1]);c.push(h<<4|e)}for(;256>c.length;)c.push(0);return c}function c(a){m=k.unpack([a[0],a[1]],f);n=a[2];r=t[n];for(var b=[m,k.unpack([a[2],a[3]],f)],c=4;c<a.length;c++){var e=
a[c],d=e>>4;b.push(h(d<<4^e));b.push(h(d))}return b}var k=b(2),f=k.int16,q=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],t=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],l=0,p=
0,m=0,n=0,r=7;d.exports.encode=function(a){for(var b=[],c=[],f=0;f<a.length;f++)if(c.push(a[f]),0==f%505&&0!=f||f==a.length-1)b=b.concat(e(c)),c=[];return b};d.exports.decode=function(a,b){b=void 0===b?256:b;for(var e=[],f=[],k=0;k<a.length;k++)0==k%b&&0!=k&&(e=e.concat(c(f)),f=[]),f.push(a[k]);return e};d.exports.encodeBlock=e;d.exports.decodeBlock=c},function(d,a,b){function g(a,b,c){c=void 0===c?10:c;var f=[];b.char?f=b.char?a.slice(0,b.realBits/8):a:Array.isArray(a)||(f=[a]);return e.toBytes(f,
e.getType(b,c))}function h(a,b,c){c=void 0===c?10:c;a=e.fromBytes(a.slice(0,8>b.bits?b.bits:b.realBits/8),e.getType(b,c));return a=b.char?a.slice(0,b.bits/8):a[0]}var e=b(3),c=b(0);a.pack=g;a.unpack=h;a.packArray=function(a,b,c){return e.toBytes(a,e.getType(b,void 0===c?10:c))};a.unpackArray=function(a,b,c){return e.fromBytes(a,e.getType(b,void 0===c?10:c))};a.unpackStruct=function(a,b,c){c=void 0===c?10:c;for(var e=a.length,f=0,d=0;d<b.length;d++)f+=b[d].realBits/8;if(e<f)return[];e=[];for(d=f=0;f<
b.length;){var g=8>b[f].bits?1:b[f].realBits/8;e=e.concat(h(a.slice(d,d+g),b[f],c));d+=g;f++}return e};a.packStruct=function(a,b,c){c=void 0===c?10:c;if(a.length<b.length)return[];for(var e=[],f=0;f<b.length;f++)e=e.concat(g(a[f],b[f],c));return e};a.findString=function(a,b){for(var e,f=0;f<a.length;f++)if(e=h(a.slice(f,f+b.length+1),new c({bits:8*b.length,"char":!0})),e==b)return f;return-1};a.Type=c;a.chr=new c({bits:8,"char":!0});a.fourCC=new c({bits:32,"char":!0});a.bool=new c({bits:1});a.int2=
new c({bits:2,signed:!0});a.uInt2=new c({bits:2});a.int4=new c({bits:4,signed:!0});a.uInt4=new c({bits:4});a.int8=new c({bits:8,signed:!0});a.uInt8=new c({bits:8});a.int16=new c({bits:16,signed:!0});a.uInt16=new c({bits:16});a.float16=new c({bits:16,"float":!0});a.int24=new c({bits:24,signed:!0});a.uInt24=new c({bits:24});a.int32=new c({bits:32,signed:!0});a.uInt32=new c({bits:32});a.float32=new c({bits:32,"float":!0});a.int40=new c({bits:40,signed:!0});a.uInt40=new c({bits:40});a.int48=new c({bits:48,
signed:!0});a.uInt48=new c({bits:48});a.float64=new c({bits:64,"float":!0});a.int16BE=new c({bits:16,signed:!0,be:!0});a.uInt16BE=new c({bits:16,be:!0});a.float16BE=new c({bits:16,"float":!0,be:!0});a.int24BE=new c({bits:24,signed:!0,be:!0});a.uInt24BE=new c({bits:24,be:!0});a.int32BE=new c({bits:32,signed:!0,be:!0});a.uInt32BE=new c({bits:32,be:!0});a.float32BE=new c({bits:32,"float":!0,be:!0});a.int40BE=new c({bits:40,signed:!0,be:!0});a.uInt40BE=new c({bits:40,be:!0});a.int48BE=new c({bits:48,
signed:!0,be:!0});a.uInt48BE=new c({bits:48,be:!0});a.float64BE=new c({bits:64,"float":!0,be:!0})},function(d,a,b){var g=b(0),h=b(5);a.getType=function(a,b){a=Object.assign(new g({}),a);a.base=b;return a};a.toBytes=function(a,b){for(var c=0,e=0,d=a.length,g=[];c<d;)e=b.writer(g,a[c++],e);b.be&&h(g,b.offset);if(10!=b.base){a=b.base;c=0;for(e=g.length;c<e;)g[c]=g[c].toString(a),c++;a=0;c=g.length;for(b=(2==b.base?8:2)+1;a<c;)g[a]=Array(b-g[a].length).join("0")+g[a],a++}return g};a.fromBytes=function(a,
b){b.be&&h(a,b.offset);if(10!=b.base)for(var c=b.base,e=0,d=a.length;e<d;)a[e]=parseInt(a[e],c),e++;c=[];e=0;for(d=a.length-(b.offset-1);e<d;)c.push(b.reader(a,e)),e+=b.offset;b.char&&(c=c.join(""));return c}},function(d,a){a=function(a){this.bits=a.bits;this.be=a.be;this.signed=a.signed;this.base=a.base?a.base:10;this.reader=this.read_;this.writer=this.write_;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits=this.bits;this.lastByteMask=255;this.build_()};a.prototype.sign=function(a){a>
this.max&&(a-=2*this.max+2);return a};a.prototype.overflow=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};a.prototype.read_=function(a,d,h){var b=0;for(h=(void 0===h?this:h).offset-1;0<h;)b|=a[h+d]<<8*h,h--;b=(a[d]|b)>>>0;return this.overflow(this.sign(b))};a.prototype.readBits_=function(a,d,h){h=void 0===h?this:h;for(var b="",c=0;c<h.offset;){var g=a[d+c].toString(2);b=Array(9-g.length).join("0")+g+b;c++}return this.overflow(this.sign(parseInt(b,2)))};a.prototype.write_=function(a,
d,h,e){e=void 0===e?this:e;d=this.overflow(d);var b=255,g=e.offset;h=this.writeFirstByte_(a,d,h,e);for(var f=2;f<=g;f++)f==g&&(b=e.lastByteMask),a[h++]=Math.floor(d/Math.pow(2,8*(f-1)))&b;return h};a.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits/8)};a.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};
a.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};a.prototype.setRealBits_=function(){this.realBits=8<this.bits?16>=this.bits?16:24>=this.bits?24:32>=this.bits?32:40>=this.bits?40:48>=this.bits?48:56>=this.bits?56:64:this.bits};a.prototype.setLastByteMask_=function(){var a=8-(this.realBits-this.bits);this.lastByteMask=Math.pow(2,0<a?a:8)-1};a.prototype.writeFirstByte_=function(a,d,h,e){e=void 0===e?this:e;8>e.bits?a[h++]=0>d?d+Math.pow(2,
e.bits):d:a[h++]=d&255;return h};d.exports=a},function(d,a){d.exports=function(a,d){for(var b=a.length,e=0;e<b;){for(var c=a,g=e,f=0,q=d-1,t=parseInt(d/2,10);f<t;){var l=c[g+f];c[g+f]=c[g+q];c[g+q]=l;f++;q--}e+=d}}}]);
